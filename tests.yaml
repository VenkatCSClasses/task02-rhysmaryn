tests:
  constructor:
    - name: valid_constructor
      given:
        email: "user@example.com"
        initialBalance: "10.00"
      expect:
        balance: "10.00"
      
    - name: invalid_email
      given:
        email: "userexample.com"
        initialBalance: "10.00"
      expectException: IllegalArgumentException

    - name: negative_balance
      given:
        email: "user@example.com"
        initialBalance: "-1.00"
      expectException: IllegalArgumentException
  
  getBalance:
    - name: returns_initial_balance
      given:
        email: "a@b.com"
        initialBalance: "7.25"
      when:
        call: getBalance
      expect:
        balance: "7.25"

  getEmail:
    - name: returns_email
      given:
        email: "a@b.com"
        initialBalance: "1.00"
      when:
        call: getEmail
      expect:
        email: "a@b.com"

  deposit:
    - name: deposit_adds_money
      given:
        email: "a@b.com"
        initialBalance: "1.00"
      when:
        call: deposit
        amount: "2.50"
      expect:
        balance: "3.50"

    - name: deposit_zero_not_allowed
      given:
        email: "a@b.com"
        initialBalance: "1.00"
      when:
        call: deposit
        amount: "0.00"
      expectException: IllegalArgumentException
      
  withdraw:
    - name: withdraw_subtracts_money
      given:
        email: "a@b.com"
        initialBalance: "10.00"
      when:
        call: withdraw
        amount: "3.00"
      expect:
        balance: "7.00"

    - name: withdraw_too_much
      given:
        email: "a@b.com"
        initialBalance: "2.00"
      when:
        call: withdraw
        amount: "3.00"
      expectException: IllegalStateException

  transfer:
    - name: transfer_moves_money
      given:
        from:
          email: "from@x.com"
          initialBalance: "10.00"
        to:
          email: "to@x.com"
          initialBalance: "1.00"
      when:
        call: transfer
        to: to
        amount: "4.00"
      expect:
        fromBalance: "6.00"
        toBalance: "5.00"
